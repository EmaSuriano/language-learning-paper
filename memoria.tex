% Document class definition
\documentclass[final,a4paper,11pt,twoside]{class_diss}

% Package imports
% Basic packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage[margin=3cm]{geometry}
\usepackage{setspace}
\usepackage{url}
\usepackage{xspace}

% Math packages
\usepackage{amsmath}
\usepackage{amsxtra}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{latexsym}
\usepackage{bbold}
\usepackage{stmaryrd}

% Graphics packages
\usepackage{graphicx}
\usepackage[svgnames,dvipsnames,table,xcdraw]{xcolor}
\usepackage{tikz}
\usetikzlibrary{shapes}

% Table packages
\usepackage{booktabs}
\usepackage{multirow}

% List and enumeration packages
\usepackage{enumitem}

% Floating object packages
\usepackage{float}
\usepackage{rotating}
\usepackage{pdflscape}
\usepackage{placeins}
\usepackage{flafter}

% Code listing packages
\usepackage{listings}

% Algorithm packages
\usepackage[ruled,vlined]{algorithm2e}
\usepackage{algorithmic}

% Bibliography and citation packages
\usepackage[authoryear,sort&compress]{natbib}
\usepackage{hypernat}
\bibliographystyle{apa}
\setcitestyle{authoryear}

% Glossary packages
\usepackage[pdftex,plainpages=false,pdfpagelabels]{hyperref}\usepackage[toc,acronym,nonumberlist,xindy={language=english},sanitize=none]{glossaries}

\makeglossaries

% Formatting packages
\usepackage[full]{textcomp}
\usepackage[scaled]{helvet}
\usepackage[titles]{tocloft}
\usepackage[explicit]{titlesec}
\usepackage{emptypage}
\usepackage{soul}
\usepackage[colorinlistoftodos, textwidth=2.5cm]{todonotes}
\usepackage{fancyhdr}


% Custom commands and settings
\theoremstyle{definition}
\newtheorem{definition}{Theorem}[section]
\theoremstyle{remark}
\newtheorem*{remark}{Remark}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

% Color definitions
\definecolor{VIU}{RGB}{240, 90, 15}
\definecolor{HIGHLIGHTED}{RGB}{130, 34, 145}
\definecolor{CITATION}{RGB}{0, 123, 194}

% Custom commands
\renewcommand{\algorithmcfname}{Algorithm}
\renewcommand{\acronymname}{List of Acronyms}
\newcommand{\inhib}{\relbar\mapsfromchar}
\newcommand{\highlighted}[1]{\color{HIGHLIGHTED}\textbf{#1}\color{black}\xspace}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
    \node[shape=diamond,fill=black!90,inner sep=1pt,minimum size=1cm] (char) {\textcolor{white}{\small\textbf{#1}}};}
}

% Fancyhdr settings
\setlength{\headheight}{14pt}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LO]{}
\fancyhead[RE]{}
\fancyfoot[C]{}
\renewcommand{\headrulewidth}{0pt}

\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\circled{\thepage}}
  \renewcommand{\headrulewidth}{0pt}
}

% Chapter title formatting
\colorlet{chapnumcolor}{VIU}
\newcommand*{\chapnumfont}{%
  \usefont{T1}{jkp}{b}{n}%
  \fontsize{70}{90}%
  \selectfont%
}
\newcommand*{\chaptitlefont}{%
  \usefont{T1}{qhv}{b}{n}%
  \fontsize{22}{26}%
  \selectfont%
}
\titleformat{name=\chapter}
{\normalfont\huge\bfseries}
{\rlap{\parbox{\textwidth}{\filleft\chapnumfont\color{chapnumcolor}\thechapter}}}
{0pt}
{\rlap{\parbox{0.7\textwidth}{\filright\chaptitlefont #1}}}

% Glossary entries
\input{sections/glossary.tex}

% Hyperref settings
\hypersetup{
    linktocpage=true,
    colorlinks=true,
    citecolor=CITATION,
    urlcolor=CITATION,
    linkcolor=CITATION,
    citebordercolor={1 0 0},
    urlbordercolor={1 0 0},
    linkbordercolor={.7 .8 .8},
    breaklinks=true,
}

% Document settings
\setcounter{secnumdepth}{3}
\onehalfspacing
\renewcommand\familydefault{\sfdefault}

% Begin document
\begin{document}

\pagestyle{empty}
\input{sections/title-page.tex}
\input{sections/favorite-quote.tex}
\input{sections/acknowledgements.tex}

\pagestyle{fancy}
\input{sections/index.tex}
% Print the glossary and acronyms
\printglossaries
\addcontentsline{toc}{chapter}{Glossary}

\input{sections/abstract.tex}
\input{sections/introduction.tex}
\input{sections/state-of-the-art.tex}
\input{sections/theoretical-framework.tex}
\input{sections/materials.tex}
\input{sections/methods.tex}
\input{sections/results.tex}
\input{sections/conclusions.tex}

\cleardoublepage
\phantomsection

% Bibliography
\begin{singlespace}
  \begin{footnotesize}
    \begin{twocolumn}
      \bibliography{bibliography}
      \addcontentsline{toc}{chapter}{References}
    \end{twocolumn}
  \end{footnotesize}
\end{singlespace}

% Appendix
\appendix
\clearpage
\onecolumn  % Reset to single column layout
\input{sections/appendices.tex}


\end{document}